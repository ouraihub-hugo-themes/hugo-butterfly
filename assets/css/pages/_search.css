/**
 * 搜索样式
 * 参考：hexo-theme-butterfly/source/css/_search/index.styl
 * 保持与原主题相同的视觉风格
 */

@layer components {
  /* 搜索对话框 */
  .search-dialog {
    @apply fixed top-[10%] left-1/2 z-[1001];
    @apply hidden -ml-[300px] p-5 w-[600px];
    @apply bg-white dark:bg-gray-800;
    @apply rounded-lg shadow-2xl;
    --search-height: 100vh;
  }

  #local-search.show .search-dialog {
    @apply block;
  }

  /* 移动端适配 */
  @media (max-width: 768px) {
    .search-dialog {
      @apply top-0 left-0 ml-0 w-full h-full rounded-none;
    }
  }

  /* 搜索导航栏 */
  .search-nav {
    @apply flex justify-between items-center mb-3.5;
    @apply text-gray-900 dark:text-gray-100 text-[1.4em] leading-none;
  }

  .search-dialog-title {
    @apply mr-1;
  }

  #loading-status {
    @apply text-primary;
  }

  #loading-status[hidden] {
    @apply hidden;
  }

  .search-close-button {
    @apply flex-1 text-gray-500 dark:text-gray-400 text-right;
    @apply transition-all duration-200;
  }

  .search-close-button:hover {
    @apply text-gray-900 dark:text-gray-100;
  }

  /* 搜索输入框 */
  .local-search-input {
    @apply mx-auto max-w-full w-full;
  }

  .local-search-input input {
    @apply py-1.5 px-3.5 w-full outline-none;
    @apply border-2 border-primary rounded-[40px];
    @apply bg-white dark:bg-gray-800;
    @apply text-gray-900 dark:text-gray-100;
  }

  .local-search-input input::placeholder {
    @apply text-gray-500 dark:text-gray-400;
  }

  /* 搜索结果列表 */
  .search-result-list {
    @apply overflow-y-auto mx-[-20px] px-[22px];
    max-height: calc(80vh - 220px);
  }

  .local-search-hit-item {
    @apply flex items-start my-0.5 leading-relaxed;
    @apply transition-all duration-200;
  }

  .local-search-hit-item:hover {
    @apply -translate-y-0.5;
  }

  .local-search-hit-item:not([value])::before {
    @apply hidden;
  }

  .local-search-hit-item[value]::before {
    @apply inline-flex flex-shrink-0 justify-center items-center;
    @apply mr-1.5 mt-0.5 min-w-[24px];
    @apply text-primary font-bold italic text-[0.9em];
    content: attr(value) '.';
  }

  .local-search-hit-item::marker {
    content: none;
  }

  .local-search-hit-item a {
    @apply flex-1 text-gray-700 dark:text-gray-300;
  }

  .local-search-hit-item a:hover {
    @apply text-primary;
  }

  .search-result-title {
    @apply font-semibold;
  }

  .search-result {
    @apply my-0 mb-2 break-words text-[0.9em];
  }

  /* 搜索遮罩 */
  #search-mask {
    @apply fixed inset-0 z-[1000] hidden;
    @apply bg-black/60;
  }

  #local-search.show #search-mask {
    @apply block;
  }

  /* 搜索统计 */
  .search-result-stats {
    @apply mt-4 text-gray-600 dark:text-gray-400 text-center text-[0.9em];
  }

  /* 关键词高亮 */
  .search-keyword {
    @apply bg-transparent text-primary font-semibold;
  }

  /* 加载动画 */
  .search-loading {
    @apply flex justify-center items-center p-5;
    @apply text-gray-600 dark:text-gray-400;
  }

  .search-loading::before {
    @apply w-4 h-4 border-2 border-gray-600 dark:border-gray-400;
    @apply border-t-transparent rounded-full;
    content: '';
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* 分隔线 */
  .search-dialog hr {
    @apply my-4 mx-auto border-gray-200 dark:border-gray-700;
  }

  /* 加载数据提示 */
  #loading-database {
    @apply flex flex-col items-center justify-center py-5;
    @apply text-gray-600 dark:text-gray-400;
  }

  #loading-database i {
    @apply text-2xl mb-2 text-primary;
  }
}
